<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AdminGo Mini App HD</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="//libtl.com/sdk.js" data-zone="10580727" data-sdk="show_10580727"></script>

<style>
  body {
    background-color: #000;
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0; padding: 15px; color: white;
    display: flex; flex-direction: column; align-items: center;
  }

  /* Blue Balance Card */
  .balance-container {
    background: #0077B6; width: 100%; border-radius: 20px;
    padding: 30px 0; text-align: center; margin-bottom: 20px;
  }
  .balance-amount { font-size: 55px; font-weight: bold; }

  /* Referral Section */
  .referral-card {
    background: #121212; border: 1px dashed #444;
    border-radius: 15px; width: 100%; padding: 15px;
    text-align: center; margin-bottom: 20px; box-sizing: border-box;
  }
  .invite-btn {
    background: #F39C12; border: none; padding: 12px;
    border-radius: 30px; color: white; font-weight: bold; width: 85%;
  }

  /* Task Grid */
  .grid-container {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 12px; width: 100%; margin-bottom: 12px;
  }
  .grid-btn {
    padding: 15px; border-radius: 12px; border: none;
    color: white; font-weight: bold; cursor: pointer;
    display: flex; flex-direction: column; align-items: center; font-size: 14px;
  }

  /* Full Width Buttons */
  .full-btn {
    width: 100%; padding: 16px; border-radius: 15px; border: none;
    color: white; font-weight: bold; margin-bottom: 12px; cursor: pointer;
  }

  /* Withdraw Button - Exact Style */
  .withdraw-btn {
    background-color: #5DADE2; width: 100%; padding: 18px;
    border-radius: 15px; border: none; color: white;
    font-weight: bold; font-size: 18px; margin-top: 10px;
    text-transform: uppercase; cursor: pointer;
  }

  /* Colors */
  .bg-green { background-color: #2ECC71; }
  .bg-blue { background-color: #3498DB; }
  .bg-purple { background-color: #9B59B6; }
  .bg-yellow { background-color: #F1C40F; color: black; }
  .bg-red { background-color: #E74C3C; }
  .bg-teal { background-color: #16A085; }
</style>
</head>
<body>

  <div class="balance-container">
    <div style="font-size: 18px; opacity: 0.9;">Current Balance</div>
    <div id="balance" class="balance-amount">0</div>
  </div>

  <div class="referral-card">
    <div style="color: #FFD700; margin-bottom: 10px;">ЁЯОБ ржкрзНрж░рждрж┐ рж░рзЗржлрж╛рж░рзЗ ржкрж╛ржи рззрзжрзж ржкрзЯрзЗржирзНржЯ!</div>
    <button class="invite-btn" onclick="inviteFriend()">ЁЯФЧ Invite Friends & Earn</button>
  </div>

  <button class="full-btn bg-green" onclick="handleAd('Daily', 20)">ЁЯОБ Daily Bonus (+20)</button>

  <div class="grid-container">
    <button class="grid-btn bg-blue" onclick="handleAd('Watch Ad', 10)">ЁЯТ░ Watch Ad <span>+10</span></button>
    <button class="grid-btn bg-purple" onclick="handleAd('Spin', 15)">ЁЯОп Spin & Earn <span>+15</span></button>
    <button class="grid-btn bg-yellow" onclick="handleAd('Lucky', 25)">ЁЯОБ Lucky Box <span>+25</span></button>
    <button class="grid-btn bg-red" onclick="handleAd('Video', 12)">ЁЯОм Video Quest <span>+12</span></button>
  </div>

  <button class="full-btn bg-teal" onclick="showRules()">ЁЯУЬ Rules & Regulations</button>
  <button class="full-btn bg-purple" onclick="tg.openLink('https://t.me/yourchannel')">ЁЯУв Official Channel</button>

  <button class="withdraw-btn" onclick="requestWithdraw()">ЁЯТ░ WITHDRAW MONEY</button>

<script>
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

const user = tg.initDataUnsafe?.user || { id: 0 };
let balance = 0;

// ржЖржкржирж╛рж░ ржЕрж░рж┐ржЬрж┐ржирж╛рж▓ рж░рзБрж▓рж╕ржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржлрж┐рж░рж┐рзЯрзЗ ржЖржирж╛ рж╣рзЯрзЗржЫрзЗ
const rulesHTML = `
  <div style="text-align: left; color: #333; font-size: 14px;">
    <h3 style="text-align: center;">Rules & Regulations</h3>
    <ol>
      <li><b>Withdraw ржирж┐рзЯржо:</b> рзлрзжрзжрзж coins ржХрж░рзЗред ржиржЧржж, ржмрж┐ржХрж╛рж╢ ржмрж╛ рж░ржХрзЗржЯ ржмрзНржпржмрж╣рж╛рж░ред</li>
      <li><b>Ad/Reward Usage:</b> Watch Ad, Spin, Lucky Box ржерзЗржХрзЗ ржкржпрж╝рзЗржирзНржЯред</li>
      <li><b>Invite Friend:</b> рж╢рзБржзрзБржорж╛рждрзНрж░ ржирждрзБржи ржмржирзНржзрзБ рж░рзЗржлрж╛рж░ ржХрж░рж▓рзЗ +50 Coinsред</li>
      <li><b>Mini Games:</b> Cheats ржмрж╛ ржЕржирзНржпрзЗрж░ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржирж┐рж╖рж┐ржжрзНржзред</li>
      <li><b>Coins ржмрзНржпрж╛рж▓рзЗржирзНрж╕:</b> ржЕрзНржпрж╛ржкрзЗрж░ ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рж╛рж░ ржмрж╛ Withdrawред</li>
      <li><b>Behavior:</b> Spam ржХрж░рж▓рзЗ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ block рж╣рждрзЗ ржкрж╛рж░рзЗред</li>
      <li><b>Contact:</b> ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛рзЯ Admin-ржПрж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рзБржиред</li>
    </ol>
  </div>
`;

function showRules() {
  tg.showPopup({
    title: 'ржирж┐ржпрж╝ржорж╛ржмрж▓рзА',
    message: 'рзз. рзлрзжрзжрзж ржХрзЯрзЗржи рж╣рж▓рзЗ ржЙржЗржержбрзНрж░ред\nрзи. ржнрж┐ржкрж┐ржПржи ржирж┐рж╖рж┐ржжрзНржзред\nрзй. рж░рзЗржлрж╛рж░ ржмрзЛржирж╛рж╕ рззрзжрзж ржХрзЯрзЗржиред\nрзк. рж╕рзНржкрзНржпрж╛ржо ржХрж░рж▓рзЗ ржЖржЗржбрж┐ ржмрзНрж▓ржХ рж╣ржмрзЗред',
    buttons: [{type: 'ok', text: 'ржмрзБржЭрзЗржЫрж┐'}]
  });
}

// Balance and Coins Logic
async function loadBalance() {
  try {
    const res = await fetch(`https://admingo.onrender.com/getBalance?telegramId=${user.id}`);
    const data = await res.json();
    balance = data.balance || 0;
    document.getElementById("balance").innerText = balance;
  } catch (e) { document.getElementById("balance").innerText = "0"; }
}

async function addCoins(points) {
  try {
    await fetch('https://admingo.onrender.com/addCoins', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ telegramId: user.id, amount: points })
    });
    balance += points;
    document.getElementById("balance").innerText = balance;
    tg.HapticFeedback.notificationOccurred('success');
  } catch (e) { console.log("Error"); }
}

function handleAd(name, points) {
  if (typeof show_10580727 === "function") {
    show_10580727();
    setTimeout(() => addCoins(points), 2000);
  } else { addCoins(points); }
}

function inviteFriend() {
  const link = `https://t.me/Tetris1earnbot?start=${user.id}`;
  tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(link)}&text=Join and Earn!`);
}

function requestWithdraw() {
  if(balance < 5000) tg.showAlert("рзлрзжрзжрзж ржХрзЯрзЗржи ржкрзВрж░рзНржг ржХрж░рзБржи!");
  else tg.showAlert("ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред");
}

loadBalance();
</script>
</body>
</html>
