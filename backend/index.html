<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admingo</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://libtl.com/sdk.js" data-zone="10580727" data-sdk="show_10580727"></script>

<style>
body{ margin:0; background:#0b0b0b; font-family:Arial, sans-serif; color:white; -webkit-user-select: none; }
.container{padding:15px}
.balance{ background: linear-gradient(135deg, #0277bd, #01579b); padding:25px; border-radius:15px; text-align:center; font-size:28px; margin-bottom: 15px; border: 1px solid #039be5;}
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.btn{ padding:18px; border-radius:12px; text-align:center; font-weight:bold; cursor:pointer; transition: 0.2s; }
.btn:active { transform: scale(0.95); opacity: 0.8; }
.green{background:#2ecc71} .blue{background:#3498db} .purple{background:#9b59b6}
.orange{background:#e67e22} .yellow{background:#f1c40f;color:black} .red{background:#e74c3c}
.full{grid-column:1/3}
</style>
</head>

<body>
<div class="container">
  <div class="balance">
    Current Balance<br>
    <span id="balance">Loading...</span>
  </div>

  <div class="btn orange full" onclick="invite()">ЁЯФЧ Invite Friends & Earn</div>
  <div class="btn green full" onclick="daily()">ЁЯОБ Daily Bonus (+10)</div>

  <div class="grid">
    <div class="btn blue" onclick="earn(10)">ЁЯТ░ Watch Ad +10</div>
    <div class="btn purple" onclick="earn(15)">ЁЯОп Spin & Earn +15</div>
    <div class="btn yellow" onclick="earn(25)">ЁЯОБ Lucky Box +15</div>
    <div class="btn orange" onclick="earn(12)">ЁЯОм Video Quest +20</div>
    <div class="btn purple" onclick="earn(18)">ЁЯПЖ Challenge +18</div>
    <div class="btn blue" onclick="earn(22)">ЁЯОо Mini Game +12</div>
    <div class="btn red full" onclick="withdrawPrompt()">ЁЯТ╕ Withdraw</div>
    <div class="btn green full" onclick="window.location.href='/admin-panel'">ЁЯЫа Admin Panel</div>
    <div class="btn yellow full" onclick="rules()">ЁЯУЬ Rules & Regulations</div>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

// рзй. ржЗржирж╕рзНржЯрзНрж░рж╛ржХрж╢ржи ржкржкржЖржк ржпрзЛржЧ ржХрж░рж╛ рж╣рж▓рзЛ
tg.showPopup({
    title: 'ЁЯУв ржХрж╛ржЬрзЗрж░ рж╕ржарж┐ржХ ржирж┐рзЯржо',
    message: 'рзз. рж╕рж╛рж░рж╛ржжрж┐ржирзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ рзирзж-рзирзлржЯрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржиред\n' +
             'рзи. ржнрж┐ржкрж┐ржПржи (VPN) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред\n' +
             'рзй. ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржирзЗрж░ ржорж╛ржЭрзЗ ржЕржирзНрждржд рзз ржорж┐ржирж┐ржЯ ржмрж┐рж░рждрж┐ ржжрж┐ржиред\n' +
             'рзк. ржкрзЯрзЗржирзНржЯ ржкрзЗрждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржиржЯрж┐ ржЕржирзНрждржд рзйрзл рж╕рзЗржХрзЗржирзНржб ржжрзЗржЦрзБржиред ржмрзЗрж╢рж┐ ржЗржиржХрж╛ржорзЗрж░ ржЬржирзНржп ржмрж┐ржЬрзНржЮрж╛ржкржиржЯрж┐ржХрзЗ ржЙржкрж░ ржирж┐ржЪрзЗ ржЯрзНрж░рж▓ ржХрж░рзБржи ржЕржержмрж╛ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржлрж▓рзЛ ржХрж░рзБржиред\n' +
             'рзл. ржирж┐рзЯржо ржирж╛ ржорж╛ржирж▓рзЗ ржПржмржВ ржХрзЛржи ржЪрж┐ржЯрж┐ржВ/ржлрзЗржХ ржХрж╛ржЬрзЗрж░ ржкрзЗржорзЗржирзНржЯ ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ ржирж╛ред',
    buttons: [{type: 'ok'}]
});
  
// ржЗржЙржЬрж╛рж░ ржбрж╛ржЯрж╛ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ
const user = tg.initDataUnsafe.user || { id: 12345678, first_name: "Guest" };
const API = window.location.origin;

/* ========== ржмрзНржпрж╛рж▓рзЗржирзНрж╕ рж▓рзЛржб ========== */
async function loadBalance(){
  try {
    const r = await fetch(`${API}/getBalance?telegramId=${user.id}`);
    const d = await r.json();
    document.getElementById("balance").innerText = d.balance !== undefined ? d.balance : 0;
  } catch(e) { 
    console.error("Balance Load Fail");
    document.getElementById("balance").innerText = "Error";
  }
}

/* ========== рзи. рж╕рзНржорж╛рж░рзНржЯ ржЯрж╛ржЗржорж╛рж░ рж╕рж╣ ржмрж┐ржЬрзНржЮрж╛ржкржи ржлрж╛ржВрж╢ржи ========== */
async function earn(points) {
  if (typeof show_10580727 === "function") {
    tg.showAlert("ржмрж┐ржЬрзНржЮрж╛ржкржи рж▓рзЛржб рж╣ржЪрзНржЫрзЗред ржкрзЯрзЗржирзНржЯ ржкрзЗрждрзЗ continue ржмрж╛ржЯржи ржЪрж╛ржкрзБржи ржПржмржВ ржХржоржкржХрзНрж╖рзЗ рзйрзл рж╕рзЗржХрзЗржирзНржб ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред ржмрзЗрж╢рж┐ ржЗржиржХрж╛ржорзЗрж░ ржЬржирзНржп рж╕рзНржХрзНрж░рж▓ ржЕржержмрж╛ ржмрж┐ржЬрзНржЮрж╛ржкржирзЗрж░ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржлрж▓рзЛ ржХрж░рзБржи");
    
    show_10580727().then(() => {
      // рзйрзл рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржЯрж╛ржЗржорж╛рж░ рж╕рзЗржЯ ржХрж░рж╛ рж╣рж▓рзЛ (рзйрзлрзжрзжрзж ржорж┐рж▓рж┐рж╕рзЗржХрзЗржирзНржб)
      setTimeout(() => {
        addPoints(points);
      }, 35000);
    });
      catch((err) => {
      console.error(err);
      tg.showAlert("ржмрж┐ржЬрзНржЮрж╛ржкржиржЯрж┐ рж╢рзЗрж╖ ржкрж░рзНржпржирзНржд ржжрзЗржЦрж╛ рж╣рзЯржирж┐ред");
    });
  } else {
    tg.showAlert("ржЕрзНржпрж╛ржб рж▓рзЛржб рж╣ржЪрзНржЫрзЗ, ржХрж┐ржЫрзБржХрзНрж╖ржг ржкрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред");
  }
}

/* ========== рзз. ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрзЯрзЗржи ржЕрзНржпрж╛ржб (QR ржХрзНржпрж╛ржорзЗрж░рж╛ рж░рж┐ржорзБржн ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ) ========== */
async function addPoints(points) {
  try {
    const response = await fetch(`${API}/addCoins`, {
      method: "POST",
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({telegramId: user.id, amount: points})
    });
    const data = await response.json();
    if(data.success) {
      loadBalance();
      // ржХрж┐ржЙржЖрж░ ржкржкржЖржк ржмржжрж▓рзЗ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ
      tg.showAlert(`ржЕржнрж┐ржиржирзНржжржи! +${points} ржХрзЯрзЗржи рж╕ржлрж▓ржнрж╛ржмрзЗ ржпрзЛржЧ рж╣рзЯрзЗржЫрзЗред`);
    }
  } catch(e) { console.error("Add Points Fail"); }
}

/* ========== ржбрзЗржЗрж▓рж┐ ржмрзЛржирж╛рж╕ ========== */
async function daily(){
  try {
    const r = await fetch(`${API}/dailyBonus`, {
      method: "POST",
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({telegramId: user.id})
    });
    const d = await r.json();
    if(d.success) {
      tg.showAlert("ржЕржнрж┐ржиржирзНржжржи! ржЖржкржирж┐ рззрзж ржХрзЯрзЗржи ржбрзЗржЗрж▓рж┐ ржмрзЛржирж╛рж╕ ржкрзЗрзЯрзЗржЫрзЗржиред");
      loadBalance();
    } else {
      tg.showAlert(d.message || "ржЖржЬржХрзЗрж░ ржмрзЛржирж╛рж╕ ржирзЗржУрзЯрж╛ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред");
    }
  } catch(e) { tg.showAlert("рж╕рж╛рж░рзНржнрж╛рж░ рж╕ржорж╕рзНржпрж╛, ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред"); }
}

/* ========== ржЗржиржнрж╛ржЗржЯ рж▓рж┐ржЩрзНржХ ========== */
function invite(){
  const link = `https://t.me/share/url?url=https://t.me/Tetris1earnbot?start=ref_${user.id}&text=Join and Earn!`;
  tg.openTelegramLink(link);
}

/* ========== ржЙржЗржержбрзНрж░ (ржорж┐ржирж┐ржорж╛ржо рзлрзжрзжрзж рж▓рж┐ржорж┐ржЯ рж╕рж╣) ========== */
function withdrawPrompt(){
  const amount = prompt("ржХржд ржХрзЯрзЗржи ржЙржЗржержбрзНрж░ ржХрж░ржмрзЗржи? (ржорж┐ржирж┐ржорж╛ржо рзлрзжрзжрзж)");
  
  if(!amount || isNaN(amount) || amount <= 0) return;

  // рзлрзжрзжрзж ржХрзЯрзЗржи ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
  if(Number(amount) < 5000) {
    tg.showAlert("ржжрзБржГржЦрж┐ржд! рж╕рж░рзНржмржирж┐ржорзНржи рзлрзжрзжрзж ржХрзЯрзЗржи ржирж╛ рж╣рж▓рзЗ ржЙржЗржержбрзНрж░ ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред");
    return;
  }

  const method = prompt("ржкрзЗржорзЗржирзНржЯ ржорзЗржержб (Bkash/Nagad):");
  const number = prompt("ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ ржжрж┐ржи:");
  
  if(!method || !number) return;

  fetch(`${API}/withdraw`, {
    method: "POST",
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      telegramId: user.id,
      amount: Number(amount),
      method,
      number
    })
  }).then(r => r.json()).then(d => {
    if(d.success) tg.showAlert("ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕ржлрж▓ рж╣рзЯрзЗржЫрзЗ! ржЕрзНржпрж╛ржбржорж┐ржи ржЪрзЗржХ ржХрж░рж╛рж░ ржкрж░рзЗ ржкрзЗржорзЗржирзНржЯ ржжрзЗржпрж╝рж╛ рж╣ржмрзЗ ржХрзЛржирзЛ ржлрзЗржХ/ржЪрж┐ржЯрж┐ржВ ржХрж░рж╛ ржХржпрж╝рзЗржи рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржПржкрзНрж░рзБржн рж╣ржмрзЗ ржирж╛");
    else tg.showAlert(d.message || "ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржкрж░рзНржпрж╛ржкрзНржд ржирзЯ!");
    loadBalance();
  });
}
function rules() {
  tg.showPopup({
    title: 'ЁЯУЬ ржХрж╛ржЬрзЗрж░ рж╕ржарж┐ржХ ржирж┐рзЯржорж╛ржмрж▓рзА',
    message: 'рзз. ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи ржЕржирзНрждржд рзйрзл-рзкрзж рж╕рзЗржХрзЗржирзНржб ржоржирзЛржпрзЛржЧ ржжрж┐рзЯрзЗ ржжрзЗржЦрзБржиред ржмрзЗрж╢рж┐ ржЗржиржХрж╛ржорзЗрж░ ржЬржирзНржп ржмрж┐ржЬрзНржЮрж╛ржкржирзЗ ржЯрж╛ржЪ ржХрж░рзЗ ржирж┐ржЪрзЗрж░ ржжрж┐ржХрзЗ ржХрзНрж░рж▓ ржХрж░рзБржи ржЕржержмрж╛ ржмрж┐ржЬрзНржЮрж╛ржкржирзЗрж░ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржлрж▓рзЛ ржХрж░рзБржиред\n' +
             'рзи. ржнрж┐ржкрж┐ржПржи (VPN) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ USA/UK рж╕рж╛рж░рзНржнрж╛рж░ рж▓рзЛржХрзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржЕржирзНржп рж▓рзЛржХрзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржПржХрж╛ржЙржирзНржЯ ржмрзНржпрж╛ржирзНржб рж╣рждрзЗ ржкрж╛рж░рзЗред\n' +
             'рзй. ржкрзНрж░рждрж┐ржжрж┐ржи рж╕рж░рзНржмрзЛржЪрзНржЪ рзирзж-рзирзлржЯрж┐рж░ ржмрзЗрж╢рж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрж╛ ржирж┐рж╖рж┐ржжрзНржзред\n' +
             'рзк. ржнрзБрж▓ ржмрж╛ ржнрзБрзЯрж╛ ржиржорзНржмрж░ ржжрж┐рзЯрзЗ ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржжрзЗржмрзЗржи ржирж╛ред\n' +
             'рзл. ржмрж┐ржЬрзНржЮрж╛ржкржирзЗ "Continue" ржмрж╛ржЯржи ржерж╛ржХрж▓рзЗ ржЕржмрж╢рзНржпржЗ рждрж╛рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред ржмрж┐ржЬрзНржЮрж╛ржкржи ржирж╛ ржжрзЗржЦрж▓рзЗ ржЯрж╛ржХрж╛ ржЗржиржХрж╛ржо рж╣ржмрзЗ ржирж╛ред\n' +
             'рзм.рж╕рж░рзНржмржирж┐ржорзНржи рзлрзжрзжрзж ржХрзЯрзЗржи рж╣рж▓рзЗ рждржмрзЗржЗ ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржжрж┐ржиред\n' +
             'рзн. ржкрзЗржорзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржжрзЗржУрзЯрж╛рж░ рзирзк-рзкрзо ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржЯрж╛ржХрж╛ ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗржиред ржмрж┐ржГржжрзНрж░ржГ ржлрзЗржХ/ржЪрж┐ржЯрж┐ржВ ржХрж░рж╛ ржХржпрж╝рзЗржи ржЕрж░рзНржЬржи ржХрж░рж▓рзЗ рж╕рзЗржЯрж╛ ржПржХржЯрж╛ ржкрж╛ ржжрзЗржпрж╝рж╛ рж╣ржмрзЗ ржирж╛',
    buttons: [{type: 'ok', text: 'ржмрзБржЭрзЗржЫрж┐'}]
  });
      }
    
// Initial Load
loadBalance();
</script>
</body>
</html>
