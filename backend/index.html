<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AdminGo Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 40px; }
  </style>
</head>
<body>
  <h2>Loading...</h2>

  <script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  const user = tg.initDataUnsafe?.user;

  if (user) {
    document.body.innerHTML = `
      <h2>Welcome ${user.first_name}</h2>
      <p><b>ID:</b> ${user.id}</p>
      <p><b>Username:</b> ${user.username || "N/A"}</p>
    `;

    // ðŸ”¥ BACKEND à¦ USER à¦ªà¦¾à¦ à¦¾à¦¨à§‹
    fetch("https://https://admingo.onrender.com/register", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        telegramId: user.id,
        username: user.username || ""
      })
    })
    .then(res => res.json())
    .then(data => console.log("Register:", data))
    .catch(err => console.error(err));

  } else {
    document.body.innerHTML = "User data not found. Open from Telegram.";
  }
  </script>
</body>
</html>
