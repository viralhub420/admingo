<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AdminGo Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 40px; }
  </style>
</head>
<body>
  <h2>Loading...</h2>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    const user = tg.initDataUnsafe?.user;

    if (user) {

      // üî¥ ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶æ ‡¶®‡¶§‡ßÅ‡¶® (backend ‡¶è ‡¶™‡¶æ‡¶†‡¶æ‡¶ö‡ßç‡¶õ‡ßá)
      fetch("/register", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          telegramId: user.id,
          username: user.username || ""
        })
      });

      // UI ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
      document.body.innerHTML = `
        <h2>Welcome ${user.first_name}</h2>
        <p><b>ID:</b> ${user.id}</p>
        <p><b>Username:</b> ${user.username || "N/A"}</p>
      `;

    } else {
      document.body.innerHTML = "User data not found. Open from Telegram.";
    }
  </script>
</body>
</html>
